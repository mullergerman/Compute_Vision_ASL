# Telegraf - HTTP ingest for Android client metrics -> Graphite (Podman pod)
[agent]
  interval = "10s"
  round_interval = true
  metric_buffer_limit = 10000
  flush_jitter = "0s"
  collection_jitter = "0s"
  debug = false
  quiet = false
  logfile = ""

# HTTP JSON ingestion
[[inputs.http_listener_v2]]
  service_address = ":8088"
  paths = ["/ingest"]
  methods = ["POST"]
  read_timeout  = "10s"
  write_timeout = "10s"
  max_body_size = "5MB"
  data_source = "body"
  data_format = "json"
  json_name_key    = "measurement"
  json_time_key    = "ts"
  json_time_format = "unix_ms"
  tag_keys = ["session","fe","device","net","carrier","country","app_ver","build"]

# Forward to Graphite (Carbon plaintext) - SAME POD NETWORK (localhost)
[[outputs.graphite]]
  servers = ["127.0.0.1:2003"]
  timeout = "5s"
  prefix  = "client"
  graphite_tag_support = true
  template = "measurement.tags.field"
